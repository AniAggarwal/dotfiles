# ---------------- Global defaults: iGPU, high quality ----------------
vo=gpu-next
gpu-api=vulkan  # newest, prefer over OpenGL
gpu-context=waylandvk

vulkan-device='Intel(R) Iris(R) Xe Graphics (ADL GT2)'

profile=gpu-hq
scale=ewa_lanczossharp
dscale=mitchell
dither-depth=auto

# gentle banding cleanup (OLED-friendly)
deband=yes

# HDR passthrough hint (Wayland + driver permitting)
target-colorspace-hint=yes

# Default hardware decode for Intel iGPU
hwdec=vaapi

# ---------------- Battery profile: iGPU, conservative -----------------
[battery]
profile-restore=copy
hwdec=vaapi
scale=bilinear
dscale=bilinear
deband=no
audio-buffer=0.2

# ---------------- dGPU profile: optional, NVIDIA on-demand -----------
# Use when you *manually* want the dGPU. Requires dGPU powered on.
[dgpu]
profile-restore=copy
# On NVIDIA, copy-back is safest if the display is on Intel
hwdec=nvdec-copy
# Pick the NVIDIA device explicitly (set after checking `--vulkan-device=help`)
# vulkan-device=1






# OLD, BEFORE DISABLING dGPU
# # Global defaults -------------------------------------------------------------
#
# stretch-image-subs-to-screen=yes
#
# vo=gpu-next
# gpu-api=vulkan
# gpu-context=waylandvk
#
# # High quality baseline
# profile=gpu-hq
# scale=ewa_lanczossharp
# dscale=mitchell
#
# # Let mpv negotiate HDR passthrough when compositor+driver support it
# target-colorspace-hint=yes
# # target-colorspace-hint-mode=source
#
# # Dithering + debanding (good for OLED banding reduction)
# dither-depth=auto
# deband=yes
#
# ###############################################################################
# # Performance (AC / OK to wake dGPU)
# ###############################################################################
# [performance]
# profile-restore=copy
# # Use NVIDIA hardware decode. Because display is on Intel, use copy-back for safety.
# hwdec=nvdec-copy
#
# ###############################################################################
# # Battery / everyday coding + casual playback
# ###############################################################################
# [battery]
# profile-restore=copy
# hwdec=vaapi
# scale=bilinear
# deband=no
# # Add a bit more audio buffering to avoid underruns on power-throttled clocks
# audio-buffer=0.2





# stretch-image-subs-to-screen=yes
#
# [performance]
# hwdec=cuda
# vo=gpu
# gpu-api=vulkan
# gpu-context=waylandvk
# profile=gpu-hq
# scale=ewa_lanczossharp
# deband=yes
#
# [battery-sdr]
# profile-desc="Low power on Intel iGPU"
# hwdec=vaapi
# vo=gpu-next
# gpu-api=opengl
# gpu-context=wayland
# scale=bilinear
# deband=no
# vd-lavc-threads=2
# video-sync=audio
#
# # battery with HDR support
# [battery]
# profile-desc="Low power on Intel iGPU with HDR"
# hwdec=vaapi
# vo=gpu-next
# gpu-api=vulkan
# gpu-context=waylandvk
# scale=bilinear
# deband=no
# vd-lavc-threads=2
# video-sync=audio
